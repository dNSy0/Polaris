
<!DOCTYPE html>
<html lang="de" data-bs-theme="dark">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Polaris Dashboard</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    .toast-container {
      position: fixed;
      top: 1rem;
      right: 1rem;
      z-index: 9999;
    }
    .autocomplete-suggestions {
      position: absolute;
      background-color: #343a40;
      border: 1px solid #495057;
      z-index: 1000;
      width: 100%;
    }
    .autocomplete-suggestions div {
      padding: 0.5rem;
      cursor: pointer;
    }
    .autocomplete-suggestions div:hover {
      background-color: #495057;
    }
  </style>
</head>
<body class="bg-dark text-white">

<div class="container py-4">
  <h1 class="mb-4 text-center">ðŸ“¦ Polaris â€“ Tabbed Lagerverwaltung</h1>

  <!-- Tabs Navigation -->
  <ul class="nav nav-tabs mb-3" id="categoryTabs" role="tablist">
    <li class="nav-item" role="presentation">
      <button class="nav-link active" id="tab1-tab" data-bs-toggle="tab" data-bs-target="#tab1" type="button" role="tab">Kategorie 1</button>
    </li>
    <li class="nav-item" role="presentation">
      <button class="nav-link" id="tab2-tab" data-bs-toggle="tab" data-bs-target="#tab2" type="button" role="tab">Kategorie 2</button>
    </li>
    <li class="nav-item" role="presentation">
      <button class="nav-link" id="tab3-tab" data-bs-toggle="tab" data-bs-target="#tab3" type="button" role="tab">Kategorie 3</button>
    </li>
  </ul>

  <!-- Tab Contents -->
  <div class="tab-content" id="tabContent">
    <!-- Each tab has its own form and table -->
    <div class="tab-pane fade show active" id="tab1" role="tabpanel"></div>
    <div class="tab-pane fade" id="tab2" role="tabpanel"></div>
    <div class="tab-pane fade" id="tab3" role="tabpanel"></div>
  </div>
</div>

<!-- Toast Container -->
<div class="toast-container position-fixed top-0 end-0 p-3">
  <div id="toastSuccess" class="toast text-bg-success" role="alert" aria-live="assertive" aria-atomic="true">
    <div class="toast-header">
      <strong class="me-auto">âœ… Erfolgreich</strong>
      <button type="button" class="btn-close btn-close-white" data-bs-dismiss="toast" aria-label="Close"></button>
    </div>
    <div class="toast-body">Eintrag gespeichert!</div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
const categories = ['tab1', 'tab2', 'tab3'];
const allEntries = { tab1: [], tab2: [], tab3: [] };

function createTabContent(tabId) {
  const container = document.getElementById(tabId);
  container.innerHTML = `
    <div class="row g-2 mb-3 position-relative">
      <div class="col-md-4 position-relative">
        <input type="text" class="form-control article-input" placeholder="Artikelname" data-tab="${tabId}">
        <div class="autocomplete-suggestions d-none" id="suggestions-${tabId}"></div>
      </div>
      <div class="col-md-2"><input type="number" class="form-control stock-input" placeholder="Im Lager" data-tab="${tabId}"></div>
      <div class="col-md-2"><input type="number" class="form-control needed-input" placeholder="Wird gebraucht" data-tab="${tabId}"></div>
      <div class="col-md-2"><input type="text" class="form-control location-input" placeholder="Lagerort" data-tab="${tabId}"></div>
      <div class="col-md-2">
        <button class="btn btn-primary w-100" onclick="addEntry('${tabId}')">HinzufÃ¼gen</button>
      </div>
    </div>
    <div class="table-responsive">
      <table class="table table-dark table-striped align-middle">
        <thead>
          <tr><th>Artikel</th><th>Im Lager</th><th>Wird gebraucht</th><th>Lagerort</th></tr>
        </thead>
        <tbody id="table-${tabId}"></tbody>
      </table>
    </div>
  `;
}

function addEntry(tabId) {
  const container = document.getElementById(tabId);
  const article = container.querySelector(".article-input").value.trim();
  const stock = container.querySelector(".stock-input").value;
  const needed = container.querySelector(".needed-input").value;
  const location = container.querySelector(".location-input").value;

  if (!article) return;

  allEntries[tabId].push({ article, stock, needed, location });
  updateTable(tabId);
  showToast();
  clearInputs(container);
}

function updateTable(tabId) {
  const tbody = document.getElementById(`table-${tabId}`);
  tbody.innerHTML = "";
  allEntries[tabId].forEach(entry => {
    const row = document.createElement("tr");
    row.innerHTML = `
      <td>${entry.article}</td>
      <td>${entry.stock}</td>
      <td>${entry.needed}</td>
      <td>${entry.location}</td>
    `;
    tbody.appendChild(row);
  });
}

function clearInputs(container) {
  container.querySelectorAll("input").forEach(input => input.value = "");
}

function showToast() {
  const toastEl = document.getElementById("toastSuccess");
  const toast = new bootstrap.Toast(toastEl);
  toast.show();
}

function setupAutocomplete(tabId) {
  const input = document.querySelector(`#${tabId} .article-input`);
  const suggestionBox = document.getElementById(`suggestions-${tabId}`);

  input.addEventListener("input", () => {
    const value = input.value.toLowerCase();
    const suggestions = allEntries[tabId]
      .map(e => e.article)
      .filter(a => a.toLowerCase().includes(value) && value.length > 1)
      .filter((v, i, a) => a.indexOf(v) === i);

    if (suggestions.length === 0) {
      suggestionBox.classList.add("d-none");
      return;
    }

    suggestionBox.innerHTML = "";
    suggestions.forEach(s => {
      const div = document.createElement("div");
      div.textContent = s;
      div.onclick = () => {
        input.value = s;
        suggestionBox.classList.add("d-none");
      };
      suggestionBox.appendChild(div);
    });
    suggestionBox.classList.remove("d-none");
  });

  input.addEventListener("blur", () => {
    setTimeout(() => suggestionBox.classList.add("d-none"), 150);
  });
}

// Initialisierung
categories.forEach(tabId => {
  createTabContent(tabId);
  setupAutocomplete(tabId);
});
</script>
</body>
</html>
